<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1021px" height="2292px" viewBox="-0.5 -0.5 1021 2292" content="&lt;mxfile host=&quot;embed.diagrams.net&quot; modified=&quot;2022-10-30T08:08:12.279Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot; etag=&quot;8lnNEHIjKuw6B7BAB85f&quot; version=&quot;20.5.1&quot; type=&quot;embed&quot;&gt;&lt;diagram id=&quot;QB-tHsTPjBIoVIsD2LTZ&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="101" y="241" width="388" height="358" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 386px; height: 1px; padding-top: 420px; margin-left: 103px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ol><li>set i as 0 to avoid error because of attempt of binding together the first quarter with no quarter (see point 4).</li><li>define a "namekey" named vector with correspondences between LAERS and FAERS variable names. Most of the conflicts are due to capital letters</li><li>for each path:</li><ol><li>get the path to the rds instead of that to the txt</li><li>print the path name to show progression</li><li>read the rds file into x</li><li>remove columns with no name (they are empty)</li><li>transform x in a data.table</li><li>rename the variables according to the "namekey" named vector to avoid conflicts when merging between LAERS and FAERS.</li><li>Select only columns that should go in the general Drug database.</li></ol><li>If i is different from 0 (this is not the first quarter), merge this quarter with the data already merged.Â </li></ol></div></div></div></foreignObject><text x="103" y="424" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">set i as 0 to avoid error because of attempt of binding together...</text></switch></g><rect x="464" y="461" width="18" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 474px; margin-left: 466px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div><br /></div></div></div></div></foreignObject><text x="466" y="478" fill="#0000FF" font-family="Helvetica" font-size="12px">&#xa;</text></switch></g><path d="M 99 319 Q 99 319 99 648.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91.5 634.88 L 99 649.88 L 106.5 634.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 99 166 L 168 238.5 L 99 311 L 30 238.5 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 239px; margin-left: 31px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Run<br />the function<br />unify_drug over<br />the selected paths in Drug, to merge all the quarters</div></div></div></foreignObject><text x="99" y="242" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Run...</text></switch></g><rect x="499" y="252" width="456" height="353" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 429px; margin-left: 501px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><p style="line-height: 1.5;"></p><div><div>unify_drug &lt;- function(files_list){</div><div>Â  i &lt;- 0</div><div>Â  namekey &lt;- c(ISR="primaryid",DRUG_SEQ="drug_seq",ROLE_COD="role_cod",</div><div>Â  Â  Â  Â  Â  Â  Â  Â DRUGNAME="drugname",VAL_VBM="val_vbm",ROUTE="route",</div><div>Â  Â  Â  Â  Â  Â  Â  Â DOSE_VBM="dose_vbm",DECHAL="dechal",</div><div>Â  Â  Â  Â  Â  Â  Â  Â RECHAL="rechal",LOT_NUM="lot_num",NDA_NUM="nda_num",</div><div>Â  Â  Â  Â  Â  Â  Â  Â EXP_DT="exp_dt")</div><div>Â  foreach (f=files_list) %do%</div><div>Â  Â {name &lt;- gsub(".TXT",".rds",f, ignore.case = T)</div><div>Â  Â  print(name)</div><div>Â  Â  x &lt;- readRDS(name)</div><div>Â  Â  x &lt;- x[!is.na(names(x))]</div><div>Â  Â  x &lt;- setDT(x)<br /></div><div>Â  Â  names(x) &lt;- namekey[names(x)]</div><div>Â  Â  cols &lt;- colnames(x)[colnames(x)%in%c("primaryid","drug_seq","role_cod",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "drugname","prod_ai")]</div><div>Â  Â  x &lt;- x[,..cols]</div><div>Â  Â  if(i&gt;0){y &lt;- rbindlist(list(y,x),fill = TRUE)}else{y &lt;- x}</div><div>Â  Â  i &lt;- i+1</div><div>Â  Â  }</div><div>Â  return(y)</div><div>}</div></div><p></p></div></div></div></foreignObject><text x="501" y="432" fill="#0000FF" font-family="Helvetica" font-size="12px">unify_drug &lt;- function(files_list){...</text></switch></g><rect x="173" y="200" width="241" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 213px; margin-left: 294px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div>DRUG &lt;- unify_drug(Drug) %&gt;% distinct()</div></div></div></div></div></foreignObject><text x="294" y="217" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG &lt;- unify_drug(Drug) %&gt;% distinct()</text></switch></g><path d="M 99 778 Q 99 778 99 802.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91.5 788.88 L 99 803.88 L 106.5 788.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="14" y="659" width="170" height="111" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 715px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">When a field contains an empty character convert it to NA (not available, i.e., empty cell) to allow for a better removal of duplicates: empty character and empty cell are considered as different in R</div></div></div></foreignObject><text x="99" y="718" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">When a field contains an emp...</text></switch></g><rect x="249" y="711" width="152" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 724px; margin-left: 325px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div><div>DRUG[DRUG==""] &lt;- NA</div></div></div></div></div></div></foreignObject><text x="325" y="728" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG[DRUG==""] &lt;- NA</text></switch></g><path d="M 98.84 907 Q 98.84 907 98.76 931.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91.3 917.86 L 98.75 932.88 L 106.3 917.91" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="14" y="813" width="170" height="86" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 856px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We remove complete duplicate from the Drug database.</div></div></div></foreignObject><text x="99" y="860" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">We remove complete duplicate...</text></switch></g><rect x="232" y="846" width="187" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 859px; margin-left: 326px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div><div><div>DRUG &lt;- DRUG %&gt;% distinct()</div></div></div></div></div></div></div></foreignObject><text x="326" y="863" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG &lt;- DRUG %&gt;% distinct()</text></switch></g><rect x="13" y="942" width="171" height="138" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 1011px; margin-left: 14px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We have now merged demographic information and resolved conflicts. And we store the database in Clean Data.<br />Then we remove it from the workspace to gain memory to extract the detailed Drug_info database.</div></div></div></foreignObject><text x="98" y="1015" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">We have now merged demograph...</text></switch></g><path d="M 98.5 1080 Q 98.5 1080 98.5 1149.76" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91 1135.88 L 98.5 1150.88 L 106 1135.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="200" y="33" width="388" height="41" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 54px; margin-left: 202px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div><div>faers_list &lt;- read.csv2("Clean Data/faers_list.csv")$x</div><div>Drug &lt;- faers_list[str_detect(faers_list,regex("drug",ignore_case = T))]</div></div></div></div></div></foreignObject><text x="202" y="57" fill="#0000FF" font-family="Helvetica" font-size="12px">faers_list &lt;- read.csv2("Clean Data/faers_list.csv")$x...</text></switch></g><path d="M 98.79 121 Q 98.79 121 98.99 163.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91.42 149.92 L 98.99 164.88 L 106.42 149.85" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="7.5" y="8" width="182" height="105" rx="47.25" ry="47.25" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 180px; height: 1px; padding-top: 61px; margin-left: 9px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Upload the list of file paths previously generated.<br />Select from the faers list, including the paths where the data can be found, only the paths inherent to drug information.</div></div></div></foreignObject><text x="99" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Upload the list of file paths...</text></switch></g><rect x="210" y="987" width="254" height="36" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 252px; height: 1px; padding-top: 994px; margin-left: 212px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div><font color="#0000ff">saveRDS(DRUG,"Clean Data/Drug.rds")</font></div><div><font color="#0000ff">rm(DRUG)<br /></font></div></div></div></div></foreignObject><text x="212" y="1006" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">saveRDS(DRUG,"Clean Data/Drug.rds")...</text></switch></g><rect x="98" y="1229" width="388" height="358" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 386px; height: 1px; padding-top: 1408px; margin-left: 100px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ol><li>set i as 0 to avoid error because of attempt of binding together the first quarter with no quarter (see point 4).</li><li>define a "namekey" named vector with correspondences between LAERS and FAERS variable names. Most of the conflicts are due to capital letters</li><li>for each path:</li><ol><li>get the path to the rds instead of that to the txt</li><li>print the path name to show progression</li><li>read the rds file into x</li><li>remove columns with no name (they are empty)</li><li>transform x in a data.table</li><li>rename the variables according to the "namekey" named vector to avoid conflicts when merging between LAERS and FAERS.<br /></li><li>Select only columns that should go in the detailed Drug_info database.</li></ol><li>If i is different from 0 (this is not the first quarter), merge this quarter with the data already merged.Â </li></ol></div></div></div></foreignObject><text x="100" y="1412" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">set i as 0 to avoid error because of attempt of binding together...</text></switch></g><rect x="461" y="1449" width="18" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1462px; margin-left: 463px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div><br /></div></div></div></div></foreignObject><text x="463" y="1466" fill="#0000FF" font-family="Helvetica" font-size="12px">&#xa;</text></switch></g><path d="M 96 1299 Q 96 1299 99.38 1654.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 91.74 1640.95 L 99.39 1655.88 L 106.74 1640.81" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 96 1154 L 165 1226.5 L 96 1299 L 27 1226.5 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 1227px; margin-left: 28px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Run<br />the function<br />unify_drug_info over<br />the selected paths in Drug, to merge all the quarters<br /></div></div></div></foreignObject><text x="96" y="1230" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Run...</text></switch></g><rect x="493" y="1211" width="518" height="425" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1424px; margin-left: 495px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><p style="line-height: 1.5;"></p><div><div>unify_drug_info &lt;- function(files_list){</div><div>Â  i &lt;- 0</div><div>Â  namekey &lt;- c(ISR="primaryid",DRUG_SEQ="drug_seq",ROLE_COD="role_cod",</div><div>Â  Â  Â  Â  Â  Â  Â  Â DRUGNAME="drugname",VAL_VBM="val_vbm",ROUTE="route",</div><div><span style="white-space: pre;">	</span><span style="white-space: pre;">	</span>DOSE_VBM="dose_vbm",DECHAL="dechal",</div><div>Â  Â  Â  Â  Â  Â  Â  Â RECHAL="rechal",LOT_NUM="lot_num",NDA_NUM="nda_num",EXP_DT="exp_dt")</div><div>Â  foreach (f=files_list) %do%</div><div>Â  Â  {name &lt;- gsub(".TXT",".rds",f, ignore.case = T)</div><div>Â  Â  print(name)</div><div>Â  Â  x &lt;- readRDS(name)</div><div>Â  Â  x &lt;- x[!is.na(names(x))]</div><div>Â  Â  x &lt;- setDT(x)</div><div>Â  Â  names(x) &lt;- namekey[names(x)]</div><div>Â  Â  cols &lt;- colnames(x)[colnames(x)%in%c("primaryid","drug_seq",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "val_vbm","route","dose_vbm",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "dechal","rechal","lot_nbr",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "lot_num","nda_num",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "cum_dose_unit","cum_dose_chr",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "dose_amt",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "dose_unit","dose_form","dose_freq",</div><div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "exp_dt")]</div><div>Â  Â  x &lt;- x[,..cols]</div><div>Â  Â  if(i&gt;0){y &lt;- rbindlist(list(y,x),fill = TRUE)}else{y &lt;- x}</div><div>Â  Â  i &lt;- i+1</div><div>Â  Â  }</div><div>Â  return(y)</div><div>}</div></div><p></p></div></div></div></foreignObject><text x="495" y="1427" fill="#0000FF" font-family="Helvetica" font-size="12px">unify_drug_info &lt;- function(files_list){...</text></switch></g><rect x="179" y="1188" width="224" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1201px; margin-left: 291px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div>DRUG_INFO &lt;- unify_Drug_info(Drug)</div></div></div></div></div></foreignObject><text x="291" y="1205" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG_INFO &lt;- unify_Drug_info(Drug)</text></switch></g><path d="M 100 1784 Q 100 1784 100 1808.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 92.5 1794.88 L 100 1809.88 L 107.5 1794.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="15" y="1665" width="170" height="111" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1720px; margin-left: 16px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">When a field contains an empty character convert it to NA (not available, i.e., empty cell) to allow for a better removal of duplicates: empty character and empty cell are considered as different in R</div></div></div></foreignObject><text x="100" y="1724" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">When a field contains an emp...</text></switch></g><rect x="250" y="1717" width="152" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1730px; margin-left: 326px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div><div>DRUG[DRUG==""] &lt;- NA</div></div></div></div></div></div></foreignObject><text x="326" y="1734" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG[DRUG==""] &lt;- NA</text></switch></g><path d="M 99.84 1913 Q 99.84 1913 99.76 1937.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 92.3 1923.86 L 99.75 1938.88 L 107.3 1923.91" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="15" y="1819" width="170" height="86" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1862px; margin-left: 16px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We remove complete duplicate from the Drug database.</div></div></div></foreignObject><text x="100" y="1866" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">We remove complete duplicate...</text></switch></g><rect x="233" y="1852" width="187" height="26" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1865px; margin-left: 327px;"><div data-drawio-colors="color: #0000FF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 255); line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="text-align: left;"><div><div><div>DRUG &lt;- DRUG %&gt;% distinct()</div></div></div></div></div></div></div></foreignObject><text x="327" y="1869" fill="#0000FF" font-family="Helvetica" font-size="12px" text-anchor="middle">DRUG &lt;- DRUG %&gt;% distinct()</text></switch></g><path d="M 99.5 2094 Q 99.5 2094 99.5 2134.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 92 2120.88 L 99.5 2135.88 L 107 2120.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="14" y="1948" width="171" height="138" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 2017px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">In 12Q4 lot numbers are stored as "lot_nbr" instead of "lot_num". When a lot is reported in "lot_nbr", also add it to the "lot_num" column.<br />Then remove "lot_nbr".</div></div></div></foreignObject><text x="100" y="2021" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">In 12Q4 lot numbers are stor...</text></switch></g><rect x="211" y="1970" width="254" height="36" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 252px; height: 1px; padding-top: 1977px; margin-left: 213px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div><div><font color="#0000ff">DRUG_INFO$lot_num &lt;- ifelse(!is.na(DRUG_INFO$lot_nbr)&amp;DRUG_INFO$lot_nbr!="",</font></div><div><font color="#0000ff">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DRUG_INFO$lot_nbr,</font></div><div><font color="#0000ff">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DRUG_INFO$lot_num)</font></div><div><font color="#0000ff">DRUG_INFO &lt;- DRUG_INFO %&gt;% select(-lot_nbr)</font></div></div><div><br /></div></div></div></div></foreignObject><text x="213" y="1989" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">DRUG_INFO$lot_num &lt;- ifelse(!is.na(DRUG_IN...</text></switch></g><rect x="14" y="2145" width="171" height="138" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 2214px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We have now merged demographic information and resolved conflicts. And we store the database in Clean Data.<br />Then we remove it from the workspace to gain memory to extract the remaining databases.</div></div></div></foreignObject><text x="100" y="2218" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">We have now merged demograph...</text></switch></g><rect x="211" y="2190" width="289" height="36" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 287px; height: 1px; padding-top: 2197px; margin-left: 213px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div><div><font color="#0000ff">saveRDS(DRUG_INFO,"Clean Data/Drug_Info.rds")</font></div></div><div><font color="#0000ff"><div>rm(DRUG_INFO)</div><div><br /></div></font></div><div><br /></div></div></div></div></foreignObject><text x="213" y="2209" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">saveRDS(DRUG_INFO,"Clean Data/Drug_Info.rds")...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>